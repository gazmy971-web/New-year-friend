
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Staff Raffle Spinner</title>
<style>
body { font-family: Arial, sans-serif; text-align:center; background:#f7f7f7; }
button { padding:12px 25px; font-size:18px; margin:15px; border:none; border-radius:10px; background:#007bff; color:white; cursor:pointer; }
#result { font-size:22px; margin-top:20px; font-weight:bold; }
</style>
</head>
<body>

<h2>ðŸŽ¡ Staff Raffle Spinner</h2>
<p>Select a name and press SPIN</p>

<select id="selector" style="padding:10px; font-size:16px;">
</select>

<br>
<canvas id="wheel" width="450" height="450"></canvas>
<button onclick="spin()">SPIN</button>

<div id="result"></div>

<script>
let originalNames = [
"Edress","Jijo","Ajay","Abualsoud","Rinu","Abdelaziz","Khalid","Lija","Somi","Karthik",
"Cleo","Wala","Wael","Hashem","Rini","Sowmya","Margeret","Sreepa","Anju tom","Ruksana",
"Ambia","Jesmol","Hossam","George","Shaza","Asma","Fatima"
];

let remaining = [...originalNames];
let results = {};
let names = [];
let arc = 0;
let startAngle = 0;
let spinning = false;

const selector = document.getElementById("selector");
originalNames.forEach(n => {
    const opt = document.createElement("option");
    opt.value = opt.textContent = n;
    selector.appendChild(opt);
});

const wheel = document.getElementById("wheel");
const ctx = wheel.getContext("2d");

function drawWheel() {
    for (let i = 0; i < names.length; i++) {
        let angle = startAngle + i * arc;
        ctx.beginPath();
        ctx.fillStyle = i % 2 === 0 ? "#ffe066" : "#ffc107";
        ctx.moveTo(225, 225);
        ctx.arc(225, 225, 225, angle, angle + arc);
        ctx.fill();

        ctx.save();
        ctx.fillStyle = "black";
        ctx.translate(225, 225);
        ctx.rotate(angle + arc / 2);
        ctx.textAlign = "right";
        ctx.font = "16px Arial";
        ctx.fillText(names[i], 200, 5);
        ctx.restore();
    }
}

function prepareWheel(list) {
    names = [...list];
    arc = (2 * Math.PI) / names.length;
    ctx.clearRect(0,0,450,450);
    drawWheel();
}

prepareWheel(originalNames);

function spin() {
    if (spinning) return;

    let person = selector.value;
    if (!remaining.includes(person)) {
        alert(person + " already selected!");
        return;
    }

    let options = remaining.filter(n => n !== person);
    if (options.length === 0) {
        alert("No more names left!");
        return;
    }

    prepareWheel(options);

    spinning = true;
    let spinAngle = Math.random() * 3000 + 3000;
    let duration = 3000;
    let start = null;

    function animate(timestamp) {
        if (!start) start = timestamp;
        let progress = timestamp - start;
        startAngle += (spinAngle / duration) * Math.PI / 180;

        ctx.clearRect(0, 0, 450, 450);
        drawWheel();

        if (progress < duration) {
            requestAnimationFrame(animate);
        } else {
            spinning = false;
            pickWinner(person, options);
        }
    }

    requestAnimationFrame(animate);
}

function pickWinner(person, list) {
    let index = Math.floor((names.length - ((startAngle % (2 * Math.PI)) / arc)) % names.length);
    let selected = names[index];

    results[person] = selected;
    remaining = remaining.filter(n => n !== selected);

    document.getElementById("result").innerText =
        person + " selected â†’ " + selected;
}
</script>

</body>
</html>
